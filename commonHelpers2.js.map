{"version":3,"file":"commonHelpers2.js","sources":["../src/js/loader.js","../src/js/shop_list.js"],"sourcesContent":["export function loaderOn(element) {\n  element.classList.add('loader');\n}\n\nexport function loaderOff(element) {\n  element.classList.remove('loader');\n}\n\n//використання\n/*\n\nHTML\nстворити div для лодера і задати йому id\n<div id=\"your-id\"></div>\n\nJS\nimport { loaderOn, loaderOff } from './loader';\nconst yourLoader = document.querySelector('#your-id');\nloaderOn(yourLoader);\nloaderOff(yourLoader);\n\n\n*/\n","import { loaderOn, loaderOff } from './loader';\nimport axios from 'axios';\n\n//функція Анатолія для отримання книги за id (поки тут, але потім її треба буде просто імпортувати)\nexport async function getBookById(bookId) {\n  const resp = await axios.get(\n    `https://books-backend.p.goit.global/books/${bookId}`\n  );\n  return resp.data;\n}\n\nconst booksContainer = document.querySelector('.js-books-container');\nconst emptyListImg = document.querySelector('.empty-shopping-list-main'); //тут був неправильний селектор\nconst shoppingListLoader = document.querySelector('#shopping-list-loader');\n\nstartFunction();\nrenderBooks();\n\nfunction startFunction() {\n  booksContainer.innerHTML = '';\n  emptyListImg.style.display = 'none';\n  loaderOn(shoppingListLoader);\n}\n\nexport function renderBooks() {\n  addBooks()\n    .then(result => {\n      const savedBooks = result;\n      if (savedBooks.length === 0) {\n        loaderOff(shoppingListLoader);\n        emptyListImg.style.display = 'block';\n        booksContainer.innerHTML = '';\n      } else {\n        const booksMarkup = savedBooks\n          .map(book => createBookCard(book))\n          .join('');\n        loaderOff(shoppingListLoader);\n        booksContainer.innerHTML = booksMarkup;\n        emptyListImg.style.display = 'none'; //тепер це працює\n      }\n    })\n    .catch(error => {\n      console.error(error); // Обробка помилок\n    });\n}\n\n//функція отримує масив id збережених у сховищі і повертає масив промісів на книги\nfunction addBooks() {\n  return new Promise((resolve, reject) => {\n    const savedInShopList = localStorage.getItem('books');\n\n    if (savedInShopList) {\n      const booksIdArray = JSON.parse(savedInShopList);\n      const promises = [];\n\n      booksIdArray.forEach(bookId => {\n        const promise = getBookById(bookId);\n        promises.push(promise);\n      });\n\n      Promise.all(promises)\n        .then(books => {\n          resolve(books);\n        })\n        .catch(error => {\n          reject(error);\n        });\n    } else {\n      resolve([]);\n    }\n  });\n}\n\n//функція повертає розмітку однієї картки\nfunction createBookCard(book) {\n  const { book_image, title, list_name, description, author, buy_links, _id } =\n    book; //деструктуризуємо\n  return `<div class=\"book-list\">\n<img class=\"book-card-img\" src=\"${book_image}\" alt=\"${title}\" />\n<div class=\"shop-card-info\">\n<div class=\"shop-card-hero\">\n<div class=\"shop-list-title-name\">\n<h3 class=\"shop-list-title\">${title}<h3>\n<p class=\"shop-list-list-name>${list_name}\"></p>\n</div>\n<button class=\"remove-shop-list-book\" data-bookid=\"${_id}\">\n<svg class=\"icon-basket-shop-list\" width=\"28\" height=\"26\" data-bookid=\"${_id}\">\n <use data-name=\"icon-removebook\" href=\"./img/symbol-defs.svg#icon-removebook\"></use>\n</svg>\n</button>\n</div>\n<p class=\"shop-list-description\">${description}<p>\n<div class=\"shop-list-downpart\">\n<p class=\"shop-list-author\"> Author: ${author}</p>\n<div class=\"shop-list-links\">\n<a class=\"amazon-link\" target=\"_blank\" href=\"${\n    buy_links.find(buyLink => buyLink.name === 'Amazon').url\n  }\">\n<img \nclass=\"amazon-img\"\nsrcset=\"./img/shopping_list/amazon1x.png 1x,\n./img/shopping_list/amazon2x.png 2x\"\nsrc=\"./img/shopping_list/amazon1x.png\"\nalt=\"Amazon Shop\"\n/>\n</a>\n<a class=\"openbooks-link\" target=\"_blank\" href=\"${\n    buy_links.find(buyLink => buyLink.name === 'Apple Books').url\n  }\">\n     <img \n  class=\"open-book-icon\"\n  src=\"./img/shopping_list/openbook.png\"\n  alt=\"Open book\"\n  />\n  </a>\n</div>\n</div>\n</div>\n</div>`;\n}\n\nfunction removeBook(event) {\n \n  if (\n    event.target.classList.contains('remove-shop-list-book') || \n    event.target.classList.contains('icon-basket-shop-list') || \n    event.target.dataset.name === 'remove-shop-list-book' \n  ) {\n   const bookId = event.target.getAttribute('data-bookid');\n    removeBookFromList(bookId);\n  }\n}\n\n\nfunction removeBookFromList(bookId) {\n let savedInShopList = localStorage.getItem('books');\n  \n  if (savedInShopList) {\n    savedInShopList = JSON.parse(savedInShopList);\n    const indexToRemove = savedInShopList.indexOf(bookId);\n    \n    // Видаляємо книгу з масиву за її індексом\n    if (indexToRemove !== -1) {\n      savedInShopList.splice(indexToRemove, 1);\n    }\n    \n    // Зберігаємо оновлений масив книг в localStorage\n    localStorage.setItem('books', JSON.stringify(savedInShopList));\n    \n    // Оновлюємо список книг на сторінці\n    renderBooks();\n  }\n}\n\n\n// document.addEventListener('DOMContentLoaded', renderBooks); //коли веб-сторінка буде повністю завантажена, функція renderBooks буде викликана автоматично. Це часто використовується для початкового відображення даних на сторінці, коли всі елементи DOM вже доступні для маніпуляції.\n\n//поки закоментувала видалення книжок\ndocument.addEventListener('click', removeBook);\n\n////книги в localStorage - тимчасова кнопка додавання книжок\nconst addButton = document.querySelector('.add-book');\n\naddButton.addEventListener('click', e => {\n  const booksIdArray = [\n    '643282b1e85766588626a080',\n    '643282b1e85766588626a0ba',\n    '643282b1e85766588626a0dc',\n    '643282b2e85766588626a0fc',\n    '643282b2e85766588626a118',\n    '643282b1e85766588626a085',\n    '643282b1e85766588626a0b2',\n  ];\n  localStorage.setItem('books', JSON.stringify(booksIdArray));\n});\n"],"names":["loaderOn","element","loaderOff","getBookById","bookId","axios","booksContainer","emptyListImg","shoppingListLoader","startFunction","renderBooks","addBooks","result","savedBooks","booksMarkup","book","createBookCard","error","resolve","reject","savedInShopList","booksIdArray","promises","promise","books","book_image","title","list_name","description","author","buy_links","_id","buyLink","removeBook","event","removeBookFromList","indexToRemove","addButton","e"],"mappings":"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"}
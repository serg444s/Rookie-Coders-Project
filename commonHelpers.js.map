{"version":3,"file":"commonHelpers.js","sources":["../src/js/api-catigories-list.js","../src/js/dark-mode.js","../src/js/iziToasts.js","../src/js/makeListOfBooks.js","../src/js/murkup.js","../src/js/startLoad.js","../src/js/addBookIdToStorage.js","../src/js/removeBookIdFromStorage.js","../src/js/modal-window.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getCategoriesAPI() {\n  const baseURL = `https://books-backend.p.goit.global/books/category-list`;\n  try {\n    const response = await axios.get(baseURL);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching books:', error);\n  }\n}\nexport async function renderCategories() {\n  try {\n    const categories = await getCategoriesAPI();\n    const categoriesBooks = document.querySelector('.categories-list_books');\n    categories.forEach(category => {\n      const listItem = document.createElement('li');\n      listItem.classList.add('item-list_category');\n      const link = document.createElement('a');\n      link.textContent = category.list_name;\n      link.href = `${category.list_name}`;\n      link.classList.add('link_category-book');\n      // link.addEventListener('click', (e)=>{\n      //   e.preventDefault()\n      //   e.target.style.color = 'blue';\n      //\n      // })\n      listItem.appendChild(link);\n      categoriesBooks.appendChild(listItem)\n    })\n  } catch (error) {\n    console.error('Error rendering categories:', error);\n  }\n}\ndocument.addEventListener('DOMContentLoaded', renderCategories);","\nexport function onLoad() {\n  const theme = localStorage.getItem('theme');\n  if (theme === 'dark-mode') {\n    document.querySelector('html').classList.add('dark-mode');\n    document.querySelector('.switch_input').checked = true;\n  } else {\n    document.querySelector('html').classList.remove('dark-mode');\n    document.querySelector('.switch_input').checked = false;\n  }\n}\n\nwindow.addEventListener('load', () => {\n  const darkModeMatchMedia = window.matchMedia(\n    '(prefers-color-scheme: dark-mode)'\n  );\n  const isDarkMode = darkModeMatchMedia.matches ? 'dark-mode' : 'light';\n  localStorage.theme = localStorage.theme || isDarkMode;\n  onLoad();\n\n  const btnEL = document.querySelector('.switch_input');\n  btnEL.addEventListener('change', event => {\n    if (event.target.checked) {\n      localStorage.setItem('theme', 'dark-mode');\n      onLoad();\n    } else {\n      localStorage.setItem('theme', 'light');\n      onLoad();\n    }\n  });\n\n  darkModeMatchMedia.addEventListener('change', event => {\n    const newTheme = event.matches ? 'dark-mode' : 'light';\n    localStorage.theme = newTheme;\n    onLoad();\n  });\n});\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// export const BOOKS =\n//   'Sorry, there are no books matching your search query. Please try again!';\n\nexport function onError() {\n  iziToast.error({\n    message:\n      'Sorry, there are no books matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n","export async function makeListOfBooks(data) {\n  return data\n    .map(({ author, book_image, title, description, _id }) => {\n      return `<li class=\"books-item-about\" id=${_id} >  \n    <div class=\"book-wrap\"> \n    <img class=\"book-img\" src=\"${book_image}\"  alt=\"${description}\" /> \n    </div> \n    <div class=\"book-info\">  \n    <p class=\"info-title\">${title}</p>  \n    <p class=\"info-author\">${author}</p>  \n    </div>  \n    </li>`;\n    })\n    .join('');\n}\n","import { makeListOfBooks } from './makeListOfBooks';\n\nexport async function murkup(data) {\n  return await Promise.all(\n    data.map(async ({ list_name, books }) => {\n      return ` \n    <div class=\"container-books\"> \n    <h3 class=\"book-categoty-title\">${list_name}</h3> \n    <ul class='list-books'>${await makeListOfBooks(books)}</ul>  \n    <button class=\"book-button\" data-js=\"${list_name}\">See more</button> \n    </div> \n    `;\n    })\n  );\n}\n","import axios from 'axios';\nimport { onError } from './iziToasts';\nimport { murkupCategoryList } from './murkupCategoryList';\nimport { murkup } from './murkup';\n\nexport async function startLoad() {\n  const categories = document.querySelector('.top-categories-list');\n  // try {\n  //   const response = await axios.get('https://books-backend.p.goit.global/books/category-list');\n  //   categories.insertAdjacentHTML('beforeend',  murkupCategoryList(response));\n  // } catch (error) {\n  //   console.log(error.message);\n  //   onError();\n  // } Ось цей try...catch не потрібний\n  try {\n    const resp = await axios.get(\n      'https://books-backend.p.goit.global/books/top-books'\n    );\n    categories.insertAdjacentHTML(\n      'afterbegin',\n      '<h2 class=\"categories-title\">Best Sellers<span> Books</span></h2>'\n    );\n    const markupData = await murkup(resp.data);\n    categories.insertAdjacentHTML('beforeend', markupData);\n    return resp.data;\n  } catch (error) {\n    console.log(error.message);\n    onError();\n  }\n}\n","export function addBookIdToStorage(bookId) {\n  const booksIdArray = JSON.parse(localStorage.getItem('books')) || [];\n  booksIdArray.push(bookId);\n  localStorage.setItem('books', JSON.stringify(booksIdArray));\n}\n","export function removeBookIdFromStorage(bookIdToRemove) {\n  const booksIdArray = JSON.parse(localStorage.getItem('books'));\n  const indexToRemove = booksIdArray.findIndex(\n    bookId => bookId === bookIdToRemove\n  );\n\n  if (indexToRemove !== -1) {\n    booksIdArray.splice(indexToRemove, 1);\n  }\n  localStorage.setItem('books', JSON.stringify(booksIdArray));\n}\n","import * as basicLightbox from 'basiclightbox';\nimport { addBookIdToStorage } from './addBookIdToStorage';\nimport { removeBookIdFromStorage } from './removeBookIdFromStorage';\n\nconst bookList = document.querySelector('.top-categories-list');\nconst modalIcon = document.querySelector('.modal-icon');\nconst backdrop = document.querySelector('.backdrop');\nconst modalBtn = document.querySelector('.modal-btn');\nconst modalCongratText = document.querySelector('.modal-congrat-text');\n\nbookList.addEventListener('click', showModal);\n///закоментував і переніс цей рядок на 47\n// modalBtn.addEventListener('click', addToShoppingList);\n\nlet instance;\nexport function showModal(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'IMG') return;\n  const liBook = event.target.closest('li');\n  const id = +liBook.dataset.id;\n  const book = bookList.find(el => el.id === id);\n  const {\n    book_image,\n    title,\n    author,\n    description,\n    buy_links: { url, name },\n  } = book;\n  instance = basicLightbox.create(\n    `\n    <div class=\"modal\">\n    <button type=\"button\" class=\"modal-icon\">\n    <svg class=\"modal-icon-closed\"><use href=\"../img/symbol-defs.svg#icon-closed\"></use></svg>\n    </button>\n        <img src=\"${book_image}\" width=\"330\" height=\"485\"/>\n        <h3>${title}</h3>\n        <p>${author}</p>\n        <p>${description}</p>\n        <ul>\n        <li><a href=\"${buy_links[url]}\">${buy_links[name]}</a></li>\n        <button class=\"modal-btn\" type=\"button\">ADD TO SHOPPING LIST</button>\n        <p class=\"modal-congrat-text\"></p>\n    </div>`,\n    {\n      onShow: () => {\n        document.addEventListener('keydown', onImageKeydown);\n        modalBtn.addEventListener('click', addToShoppingList);\n      },\n      onClose: () => {\n        document.removeEventListener('keydown', onImageKeydown);\n        modalIcon.addEventListener('click', onModalIconClick);\n        backdrop.addEventListener('click', onBackdropClick);\n      },\n    }\n  );\n  instance.show();\n}\n\nfunction onImageKeydown(event) {\n  event.preventDefault();\n  if (event.code === 'Escape') {\n    instance.close();\n  }\n}\n\nfunction onModalIconClick(event) {\n  event.preventDefault();\n  instance.close();\n}\n\nfunction onBackdropClick(event) {\n  event.preventDefault();\n  instance.close();\n}\n\nfunction addToShoppingList(event) {\n  event.preventDefault();\n  modalBtn.textContent = 'REMOVE FROM THE SHOPPING LIST';\n  modalCongratText.textContent =\n    'Congratulations! You have added the book to the shopping list. To delete, press the button \"Remove from the shopping list\".';\n  addBookIdToStorage();\n  modalBtn.addEventListener('click', () => {\n    removeBookIdFromStorage();\n  });\n}\n","import { getCategoriesAPI } from './js/api-catigories-list.js';\nimport { onLoad } from './js/dark-mode.js';\nimport { startLoad } from './js/startLoad.js';\n\nimport { showModal } from './js/modal-window.js';\n\nconst bookList = document.querySelector('.top-categories-list');\n\n\n\ngetCategoriesAPI();\n\ndocument.addEventListener('DOMContentLoaded', onLoad);\nbookList.addEventListener('click', showModal);\n\nstartLoad();\n\n\n"],"names":["getCategoriesAPI","baseURL","axios","error","renderCategories","categories","categoriesBooks","category","listItem","link","onLoad","darkModeMatchMedia","isDarkMode","event","newTheme","onError","iziToast","makeListOfBooks","data","author","book_image","title","description","_id","murkup","list_name","books","startLoad","resp","markupData","addBookIdToStorage","bookId","booksIdArray","removeBookIdFromStorage","bookIdToRemove","indexToRemove","bookList","modalIcon","backdrop","modalBtn","modalCongratText","showModal","instance","id","book","el","url","name","basicLightbox.create","onImageKeydown","addToShoppingList","onModalIconClick","onBackdropClick"],"mappings":"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"}